-- RELKINLibrary.lua (Module Script)

local RELKINLibrary = {}
RELKINLibrary.__index = RELKINLibrary

local function createInstance(instanceType, properties, parent)
    local instance = Instance.new(instanceType)
    for prop, value in pairs(properties) do
        instance[prop] = value
    end
    instance.Parent = parent
    return instance
end

function RELKINLibrary:Create()
    local library = createInstance("ScreenGui", {
        Name = "RELKIN library",
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
        ResetOnSpawn = false
    }, game.Players.LocalPlayer:WaitForChild("PlayerGui"))

    local GUI = createInstance("Frame", {
        Name = "GUI",
        BackgroundColor3 = Color3.fromRGB(0, 0, 0),
        BackgroundTransparency = 1,
        BorderColor3 = Color3.fromRGB(0, 0, 0),
        Position = UDim2.new(0.334582448, 0, 0.259028643, 0),
        Size = UDim2.new(0.370985001, 0, 0.833599985, 0)
    }, library)

    local hub = createInstance("Frame", {
        Name = "hub",
        BackgroundColor3 = Color3.fromRGB(67, 67, 67),
        Size = UDim2.new(1.00144303, 0, 0.998080611, 0)
    }, GUI)

    createInstance("UICorner", {}, hub)

    local Tabs = createInstance("ScrollingFrame", {
        Name = "Tabs",
        Active = true,
        BackgroundColor3 = Color3.fromRGB(0, 0, 0),
        Position = UDim2.new(0, 0, 0.0942307711, 0),
        Size = UDim2.new(0.188760802, 0, 0.904963017, 0),
        CanvasSize = UDim2.new(0, 0, 5, 0),
        HorizontalScrollBarInset = Enum.ScrollBarInset.Always,
        ScrollBarThickness = 10,
        VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar,
        VerticalScrollBarPosition = Enum.VerticalScrollBarPosition.Left
    }, hub)

    createInstance("UICorner", {}, Tabs)
    createInstance("UIAspectRatioConstraint", { AspectRatio = 0.278 }, Tabs)

    local Name = createInstance("TextLabel", {
        Name = "Name",
        BackgroundColor3 = Color3.fromRGB(94, 94, 94),
        Position = UDim2.new(-0.00112176291, 0, -0.00186849444, 0),
        Size = UDim2.new(1, 0, 0.0964779332, 0),
        ZIndex = 2,
        Font = Enum.Font.Unknown,
        Text = "RELKIN",
        TextColor3 = Color3.fromRGB(0, 0, 0),
        TextScaled = true,
        TextSize = 48,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left
    }, hub)

    createInstance("UICorner", {}, Name)
    createInstance("UIAspectRatioConstraint", { AspectRatio = 13.833 }, Name)
    createInstance("UITextSizeConstraint", { MaxTextSize = 50 }, Name)

    createInstance("UIAspectRatioConstraint", { AspectRatio = 1.335 }, hub)
    createInstance("UIAspectRatioConstraint", { AspectRatio = 1.330 }, GUI)
    createInstance("UIAspectRatioConstraint", { AspectRatio = 2.326 }, library)

    self:SetupDragging(hub) -- Setup dragging for the 'hub' frame

    return library
end

function RELKINLibrary:SetupDragging(frame)
    local player = game.Players.LocalPlayer
    local mouse = player:GetMouse()
    local dragging, dragStart, startPos = false, nil, nil

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    game:GetService("RunService").RenderStepped:Connect(function()
        if dragging then
            local deltaX = mouse.X - dragStart.X
            local deltaY = mouse.Y - dragStart.Y
            frame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + deltaX,
                startPos.Y.Scale, startPos.Y.Offset + deltaY
            )
        end
    end)
end

-- Return the library module
return RELKINLibrary
